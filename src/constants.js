/**
 * Pension Tools - Constants Module
 * Centralized configuration and magic numbers
 */

// ============================================================================
// VERSION
// ============================================================================
export const VERSION = '6.0.0';

// ============================================================================
// TAX DEFAULTS (UK 2024/25)
// ============================================================================
export const TAX_DEFAULTS = {
  PERSONAL_ALLOWANCE: 12570,
  BASIC_RATE_LIMIT: 50270,
  HIGHER_RATE_LIMIT: 125140,
  BASIC_RATE: 0.20,
  HIGHER_RATE: 0.40,
  ADDITIONAL_RATE: 0.45,
  PA_TAPER_THRESHOLD: 100000,
  PA_TAPER_RATE: 0.5  // Lose £1 of PA for every £2 over threshold
};

// ============================================================================
// INFLATION DEFAULTS
// ============================================================================
export const INFLATION_DEFAULTS = {
  ASSUMED_CPI: 0.025,           // 2.5% default
  OTHER_INCOME_CAP: 0.04,       // 4% cap on other pension CPI
  STATE_PENSION_FLOOR: 0.025    // Minimum state pension increase
};

// ============================================================================
// DRAWDOWN DEFAULTS
// ============================================================================
export const DRAWDOWN_DEFAULTS = {
  BASE_SALARY: 30000,
  EQUITY_MIN: 250000,
  BOND_MIN: 200000,
  CASH_TARGET: 50000,
  DURATION_YEARS: 35,
  PROTECTION_FACTOR: 20,        // % reduction in protection mode
  RECOVERY_BUFFER: 15000,       // Buffer before exiting protection
  CONSECUTIVE_LIMIT: 3          // Cash draws before protection triggers
};

// ============================================================================
// SIMULATION DEFAULTS
// ============================================================================
export const SIMULATION_DEFAULTS = {
  MONTE_CARLO_RUNS: 1000,
  SAMPLE_TRAJECTORIES: 100,
  YEARS: 35,
  PROTECTION_MULTIPLIER: 0.8,   // Draw multiplier in protection mode
  HODL_ENABLED: false,
  HODL_VALUE: 25000
};

// ============================================================================
// BOND MODEL ALLOCATIONS
// ============================================================================
export const BOND_MODEL = {
  // Normal regime allocation
  NORMAL: {
    LINKER: 0.15,     // Index-linked gilts
    NOMINAL: 0.30,    // Nominal bonds
    PROPERTY: 0.20,   // Property
    COMMODITY: 0.10,  // Commodities
    CASH: 0.10,       // Cash
    EQUITY: 0.15      // Partial equity exposure
  },
  // High inflation regime (>4.5%)
  HIGH_INFLATION: {
    LINKER: 0.50,
    NOMINAL: 0.10,
    PROPERTY: 0.15,
    COMMODITY: 0.15,
    CASH: 0.05,
    EQUITY: 0.05
  },
  // Deflation regime (<0%)
  DEFLATION: {
    LINKER: 0.05,
    NOMINAL: 0.50,
    PROPERTY: 0.10,
    COMMODITY: 0.05,
    CASH: 0.20,
    EQUITY: 0.10
  },
  // Volatility parameters
  VOLATILITY: {
    LINKER: 0.03,
    NOMINAL: 0.05,
    PROPERTY: 0.08,
    COMMODITY: 0.15,
    CASH: 0.002
  }
};

// ============================================================================
// HISTORICAL DATA - US S&P 500 TOTAL RETURN (1928-2024) - 97 years
// Used for Monte Carlo sampling and historical sequence analysis
// ============================================================================
export const EQUITY_RETURNS = {
  1928: 0.4781, 1929: -0.172, 1930: -0.338, 1931: -0.527, 1932: -0.231,
  1933: 0.669, 1934: 0.041, 1935: 0.3879, 1936: 0.2492, 1937: -0.3839,
  1938: 0.2846, 1939: -0.0278, 1940: -0.1278, 1941: -0.1552, 1942: 0.0782,
  1943: 0.1382, 1944: 0.1226, 1945: 0.2665, 1946: -0.0818, 1947: 0.0225,
  1948: -0.0246, 1949: 0.1279, 1950: 0.1787, 1951: 0.1463, 1952: 0.0837,
  1953: -0.0377, 1954: 0.4399, 1955: 0.2084, 1956: 0.0262, 1957: -0.1278,
  1958: 0.3396, 1959: 0.1612, 1960: -0.0912, 1961: 0.1889, 1962: -0.1081,
  1963: 0.1715, 1964: 0.1478, 1965: 0.1058, 1966: -0.1858, 1967: 0.1506,
  1968: 0.0457, 1969: -0.1524, 1970: 0.0482, 1971: 0.0627, 1972: 0.1476,
  1973: -0.1652, 1974: -0.2777, 1975: 0.3815, 1976: 0.1774, 1977: -0.1271,
  1978: -0.0303, 1979: 0.0414, 1980: 0.1493, 1981: -0.0909, 1982: 0.1976,
  1983: 0.2027, 1984: -0.0365, 1985: 0.2778, 1986: 0.2278, 1987: 0.0227,
  1988: 0.1185, 1989: 0.2697, 1990: -0.0456, 1991: 0.2013, 1992: 0.0440,
  1993: 0.1372, 1994: 0.0218, 1995: 0.3345, 1996: 0.2601, 1997: 0.2264,
  1998: 0.1627, 1999: 0.2516, 2000: -0.0617, 2001: -0.0727, 2002: -0.1679,
  2003: 0.2525, 2004: 0.0333, 2005: -0.0061, 2006: 0.1618, 2007: 0.0648,
  2008: -0.3355, 2009: 0.1882, 2010: 0.1102, 2011: 0.0556, 2012: 0.0728,
  2013: 0.2665, 2014: 0.0775, 2015: -0.0230, 2016: 0.1342, 2017: 0.2511,
  2018: -0.0583, 2019: 0.2234, 2020: 0.0726, 2021: 0.1873, 2022: -0.0878,
  2023: 0.1399, 2024: 0.1299
};

// ============================================================================
// HISTORICAL DATA - US CPI INFLATION (1928-2024) - 97 years
// ============================================================================
export const INFLATION = {
  1928: -0.012, 1929: 0.002, 1930: -0.060, 1931: -0.094, 1932: -0.103,
  1933: 0.005, 1934: 0.021, 1935: 0.030, 1936: 0.014, 1937: 0.028,
  1938: -0.020, 1939: -0.014, 1940: 0.010, 1941: 0.099, 1942: 0.090,
  1943: 0.030, 1944: 0.023, 1945: 0.023, 1946: 0.186, 1947: 0.087,
  1948: 0.030, 1949: -0.020, 1950: 0.059, 1951: 0.060, 1952: 0.009,
  1953: 0.006, 1954: -0.007, 1955: 0.004, 1956: 0.030, 1957: 0.028,
  1958: 0.017, 1959: 0.015, 1960: 0.014, 1961: 0.007, 1962: 0.013,
  1963: 0.017, 1964: 0.010, 1965: 0.019, 1966: 0.034, 1967: 0.028,
  1968: 0.046, 1969: 0.062, 1970: 0.055, 1971: 0.033, 1972: 0.034,
  1973: 0.087, 1974: 0.124, 1975: 0.069, 1976: 0.048, 1977: 0.067,
  1978: 0.090, 1979: 0.133, 1980: 0.125, 1981: 0.089, 1982: 0.038,
  1983: 0.038, 1984: 0.040, 1985: 0.038, 1986: 0.011, 1987: 0.044,
  1988: 0.044, 1989: 0.046, 1990: 0.061, 1991: 0.030, 1992: 0.029,
  1993: 0.027, 1994: 0.026, 1995: 0.025, 1996: 0.034, 1997: 0.017,
  1998: 0.016, 1999: 0.027, 2000: 0.034, 2001: 0.016, 2002: 0.024,
  2003: 0.019, 2004: 0.033, 2005: 0.034, 2006: 0.025, 2007: 0.041,
  2008: 0.001, 2009: 0.027, 2010: 0.015, 2011: 0.030, 2012: 0.017,
  2013: 0.015, 2014: 0.008, 2015: 0.007, 2016: 0.021, 2017: 0.021,
  2018: 0.019, 2019: 0.023, 2020: 0.012, 2021: 0.070, 2022: 0.065,
  2023: 0.032, 2024: 0.029
};

// ============================================================================
// SCENARIO DEFINITIONS
// ============================================================================
export const SCENARIOS = {
  GREAT_DEPRESSION: {
    name: 'Great Depression',
    equity: [-0.17, -0.34, -0.53, -0.23, 0.67, 0.04, 0.39, 0.25, -0.38, 0.28],
    inflation: [0, -0.06, -0.09, -0.10, 0.01, 0.02, 0.03, 0.01, 0.03, -0.02],
    color: '#e74c3c'
  },
  STAGFLATION_70S: {
    name: 'Stagflation 70s',
    equity: [-0.17, -0.28, 0.38, 0.18, -0.13, -0.03, 0.04, 0.15, -0.09, 0.20],
    inflation: [0.09, 0.12, 0.07, 0.05, 0.07, 0.09, 0.13, 0.13, 0.09, 0.04],
    color: '#e67e22'
  },
  LOST_DECADE_2000S: {
    name: 'Lost Decade 2000s',
    equity: [-0.06, -0.07, -0.17, 0.25, 0.03, -0.01, 0.16, 0.06, -0.34, 0.19],
    inflation: [0.03, 0.02, 0.02, 0.02, 0.03, 0.03, 0.03, 0.04, 0, 0.03],
    color: '#9b59b6'
  },
  CRISIS_2008: {
    name: '2008 Crisis',
    equity: [-0.34, 0.19, 0.11, 0.06, 0.07, 0.27, 0.08, -0.02, 0.13, 0.25],
    inflation: [0, 0.03, 0.02, 0.03, 0.02, 0.02, 0.01, 0.01, 0.02, 0.02],
    color: '#3498db'
  },
  SYNTHETIC_WORST: {
    name: 'Synthetic Worst',
    equity: [-0.40, 0.10, 0.10, 0.10, -0.35, 0.10, 0.10, 0.10, 0.10, -0.30],
    inflation: [0.08, 0.05, 0.05, 0.05, 0.08, 0.05, 0.05, 0.05, 0.05, 0.08],
    color: '#1abc9c'
  }
};

// ============================================================================
// UI CHART COLORS
// ============================================================================
export const CHART_COLORS = {
  SUCCESS: '#2ea043',
  SUCCESS_LIGHT: 'rgba(46,160,67,0.25)',
  FAILURE: '#f85149',
  FAILURE_LIGHT: 'rgba(248,81,73,0.8)',
  WARNING: '#f0c674',
  INFO: '#7eb8da',
  GLIDEPATH: '#7eb8da',
  CONE_LIGHT: 'rgba(240,198,116,0.15)',
  CONE_MEDIUM: 'rgba(240,198,116,0.2)',
  CONE_DARK: 'rgba(240,198,116,0.35)',
  GRID: 'rgba(255,255,255,0.1)',
  TEXT_MUTED: '#8b8b9b'
};

// ============================================================================
// TAX YEAR BOUNDARIES
// ============================================================================
export const TAX_YEAR = {
  START_MONTH: 4,  // April
  START_DAY: 6
};
